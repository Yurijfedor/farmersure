"use strict";(self.webpackChunkfarmersure=self.webpackChunkfarmersure||[]).push([[117],{4930:function(e,n,t){t.d(n,{G:function(){return s}});var r=t(4165),i=t(5861),a=t(9439),o=t(2791),l=t(9434),c=(t(7799),t(2734)),u=t(7496),s=(t(673),function(){var e=(0,l.I0)(),n=(0,o.useState)(null),t=(0,a.Z)(n,2),s=t[0],d=t[1],f=(0,o.useState)(!0),h=(0,a.Z)(f,2),p=h[0],v=h[1],x=(0,o.useState)(null),m=(0,a.Z)(x,2),j=m[0],g=m[1],y=JSON.parse(localStorage.getItem("user")),b=null===y||void 0===y?void 0:y.uid;(0,o.useEffect)((function(){b&&(0,c.et)(b).then((function(e){d(e),v(!1)})).catch((function(e){g(e.message),v(!1)}))}),[e,b]);var Z=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!b){n.next=11;break}return n.prev=1,n.next=4,(0,c.Lj)(b,t);case 4:d(t),e((0,u.$l)(t)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),g(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return{profile:s,loading:p,error:j,updateProfile:Z}})},1943:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r,i,a,o,l=t(2791),c=t(4165),u=t(1413),s=t(5861),d=t(9439),f=t(9434),h=t(4930),p=t(2734),v=t(6351),x=t(8501),m=t(3329),j=function(){var e=(0,f.v9)(v.d),n=(0,f.v9)(v.Dz),t=(0,f.v9)(v.vh),r=(0,h.G)().updateProfile,i=(0,l.useState)(!1),a=(0,d.Z)(i,2),o=a[0],j=a[1],g=(0,l.useState)(null),y=(0,d.Z)(g,2),b=y[0],Z=y[1],w=(0,l.useState)(null),k=(0,d.Z)(w,2),C=k[0],S=k[1],z=(0,l.useState)(!1),D=(0,d.Z)(z,2),F=D[0],M=D[1];(0,l.useEffect)((function(){e&&Z(e)}),[e]);var O=function(){var n=(0,s.Z)((0,c.Z)().mark((function n(){var t;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(C){n.next=2;break}return n.abrupt("return");case 2:return M(!0),n.prev=3,n.next=6,(0,p.ow)(C,e.id);case 6:t=n.sent,Z((function(e){return(0,u.Z)((0,u.Z)({},e),{},{customPhotoURL:t})})),S(null),M(!1),r(b),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(3),console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u043e\u0442\u043e:",n.t0),M(!1);case 17:case"end":return n.stop()}}),n,null,[[3,13]])})));return function(){return n.apply(this,arguments)}}();return(0,m.jsx)("div",{children:n?(0,m.jsx)("p",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):t?(0,m.jsxs)("p",{children:["\u041f\u043e\u043c\u0438\u043b\u043a\u0430: ",t]}):b&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"\u041e\u0441\u043e\u0431\u0438\u0441\u0442\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{src:b.customPhotoURL||b.photoURL||"https://via.placeholder.com/150",alt:"Profile",style:{width:150,height:150,borderRadius:"50%"}}),o&&(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var n=e.target.files[0];n&&S(n)}}),(0,m.jsx)(x.z,{size:"small",onClick:O,disabled:!C||F,children:F?"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f...":"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"})]})]}),o?(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"text",name:"name",placeholder:"name",value:b.name,onChange:function(e){return Z((function(n){return(0,u.Z)((0,u.Z)({},n),{},{name:e.target.value})}))}}),(0,m.jsx)("input",{type:"email",name:"email",placeholder:"email",value:b.email,onChange:function(e){return Z((function(n){return(0,u.Z)((0,u.Z)({},n),{},{email:e.target.value})}))}}),(0,m.jsx)("input",{type:"tel",name:"phone",placeholder:"phone",value:b.phone,onChange:function(e){return Z((function(n){return(0,u.Z)((0,u.Z)({},n),{},{phone:e.target.value})}))}}),(0,m.jsx)(x.z,{size:"small",onClick:function(){r(b),j(!1)},children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]}):(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{children:["\u0406\u043c'\u044f: ",b.name]}),(0,m.jsxs)("p",{children:["\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430: ",b.email]}),(0,m.jsxs)("p",{children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",b.phone]}),(0,m.jsx)(x.z,{size:"small",onClick:function(){return j(!0)},children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})]})]})})},g=t(208),y=t(8001),b=function(){var e=(0,f.I0)(),n=(0,f.v9)(v.d),t=(0,l.useState)(!1),r=(0,d.Z)(t,2),i=r[0],a=r[1],o=(0,l.useState)(""),c=(0,d.Z)(o,2),u=c[0],s=c[1];return(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),(0,m.jsxs)("p",{children:["\u0412\u0430\u0448 \u0431\u0430\u043b\u0430\u043d\u0441: ",(null===n||void 0===n?void 0:n.balance)||0," \u0433\u0440\u043d"]}),(0,m.jsx)(x.z,{size:"small",onClick:function(){return a(!0)},children:"\u041f\u043e\u043f\u043e\u0432\u043d\u0438\u0442\u0438 \u0431\u0430\u043b\u0430\u043d\u0441"}),(0,m.jsxs)(y.u,{isOpen:i,onClose:function(){return a(!1)},children:[(0,m.jsx)("h3",{children:"\u041f\u043e\u043f\u043e\u0432\u043d\u0438\u0442\u0438 \u0431\u0430\u043b\u0430\u043d\u0441"}),(0,m.jsx)("input",{style:{marginTop:"10px"},type:"number",value:u,onChange:function(e){return s(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0443\u043c\u0443"}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[(0,m.jsx)(x.z,{variant:"formBtn",size:"small",onClick:function(){var t=parseFloat((Number(n.balance)+Number(u)).toFixed(2));e((0,g.ck)({uid:n.id,data:{balance:t}})),a(!1),s("")},disabled:!u||u<=0,children:"\u041f\u043e\u043f\u043e\u0432\u043d\u0438\u0442\u0438"}),(0,m.jsx)(x.z,{variant:"formBtn",size:"small",onClick:function(){return a(!1)},children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})]})},Z=t(1283),w=t(6370),k=t(3520),C=t(1251),S=t(1628),z=t(186),D=t(168),F=t(6444),M=F.ZP.table(r||(r=(0,D.Z)(["\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n  font-family: Arial, sans-serif;\n"]))),O=F.ZP.th(i||(i=(0,D.Z)(["\n  background-color: #f4f4f4;\n  font-weight: bold;\n  border: 2px solid #ddd;\n  padding: 10px;\n  text-align: center;\n"]))),R=F.ZP.td(a||(a=(0,D.Z)(["\n  border: 2px solid #ddd;\n  padding: 10px;\n  text-align: center;\n\n  img {\n    border-radius: 5px;\n    border: 1px solid #ccc;\n    width: 50px;\n    height: 50px;\n    object-fit: cover;\n  }\n"]))),E=F.ZP.tr(o||(o=(0,D.Z)(["\n  &:nth-child(even) {\n    background-color: #f9f9f9;\n  }\n\n  &:hover {\n    background-color: #f1f1f1;\n  }\n"]))),I=function(){var e=(0,f.I0)(),n=JSON.parse(localStorage.getItem("user")),t=(0,l.useState)(null),r=(0,d.Z)(t,2),i=r[0],a=r[1],o=(0,l.useState)(null),c=(0,d.Z)(o,2),s=c[0],h=c[1],p=(0,l.useState)(!1),j=(0,d.Z)(p,2),y=j[0],b=j[1],D=(0,f.v9)((function(e){return(0,v.g8)(e,n.uid)})),F=(0,f.v9)(v.d),I=(0,f.v9)(v.$h),P=(0,z.Sd)().mutate,N=function(e,n){a(e),h(n),b(!0)},T=function(){a(null),h(null),b(!1)},A=new Date,U=new Date(A.getFullYear(),A.getMonth()+2,0).toISOString().split("T")[0];return(0,m.jsxs)("div",{className:"rented-hives-section",children:[(0,m.jsx)("h2",{children:"\u041e\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u0456 \u0432\u0443\u043b\u0438\u043a\u0438"}),(0,m.jsxs)(M,{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)(O,{children:"\u2116"}),(0,m.jsx)(O,{children:"\u0424\u043e\u0442\u043e"}),(0,m.jsx)(O,{children:"\u0421\u0438\u043b\u0430"}),(0,m.jsx)(O,{children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u0456\u0441\u0442\u044c"}),(0,m.jsx)(O,{children:"\u0422\u0438\u043f \u043e\u0440\u0435\u043d\u0434\u0438"}),(0,m.jsx)(O,{children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u043e\u0440\u0435\u043d\u0434\u0438"}),(0,m.jsx)(O,{children:"\u0414\u0456\u0457"})]})}),(0,m.jsx)("tbody",{children:D.map((function(e,n){return(0,m.jsxs)(E,{children:[(0,m.jsx)(R,{children:n+1}),(0,m.jsx)(R,{children:(0,m.jsx)("img",{src:e.photoURL,alt:"\u0412\u0443\u043b\u0438\u043a ".concat(e.number)})}),(0,m.jsx)(R,{children:"".concat(e.power," \u0440\u0430\u043c\u043e\u043a")}),(0,m.jsx)(R,{children:(0,m.jsxs)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,m.jsx)(w.X,{hive:e,product:"honey"}),(0,m.jsx)(w.X,{hive:e,product:"pollen"}),(0,m.jsx)(w.X,{hive:e,product:"propolis"}),(0,m.jsx)(w.X,{hive:e,product:"royalJelly"}),(0,m.jsx)(w.X,{hive:e,product:"droneHomogenate"}),(0,m.jsx)(w.X,{hive:e,product:"wax"}),(0,m.jsx)(w.X,{hive:e,product:"beeVenom"})]})}),(0,m.jsx)(R,{children:"monthly"===e.lessee.type?"\u043f\u043e\u043c\u0456\u0441\u044f\u0447\u043d\u0430":"seasonal"===e.lessee.type?"\u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0441\u0435\u0437\u043e\u043d\u0443":"\u043d\u0435 \u0432\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"}),(0,m.jsx)(R,{children:e.lessee.endDate}),(0,m.jsxs)(R,{children:[e.lessee.endDate<U&&(0,m.jsx)(x.z,{variant:"formBtn",size:"medium",onClick:function(){return N(e,"extendMonthly")},children:"\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438 \u043d\u0430 \u043c\u0456\u0441\u044f\u0446\u044c"}),"2025-08-31"!==e.lessee.endDate&&(0,m.jsx)(x.z,{variant:"formBtn",size:"medium",onClick:function(){return N(e,"extendSeason")},children:"\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438 \u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0441\u0435\u0437\u043e\u043d\u0443"}),(0,m.jsx)(x.z,{variant:"formBtn",size:"medium",onClick:function(){return N(e,"videoReview")},children:"\u0417\u0430\u043c\u043e\u0432\u0438\u0442\u0438 \u043e\u043d\u043b\u0430\u0439\u043d-\u0432\u0456\u0434\u0435\u043e\u043e\u0433\u043b\u044f\u0434"}),(0,m.jsx)(x.z,{variant:"formBtn",size:"medium",onClick:function(){return N(e,"cancelContract")},children:"\u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438 \u0434\u043e\u0433\u043e\u0432\u0456\u0440 \u043e\u0440\u0435\u043d\u0434\u0438"})]})]},e.id)}))})]}),s&&(0,m.jsx)(k.z,{isOpen:y,onClose:T,onSignContract:"cancelContract"===s?function(){try{var n=new Date,t=new Date(i.lessee.endDate),r=12*(t.getFullYear()-n.getFullYear())+(t.getMonth()-n.getMonth());console.log(r);var a=n-new Date(i.lessee.startDate)<864e5&&r>=0?r+1:r>0?r:0;console.log(a);var o=a>0?(0,C.ER)(i.hiveComponents,i.power)*a:0,l=parseFloat((Number(F.balance)+o).toFixed(2));P(i.id),e((0,g.ck)({uid:F.id,data:{balance:l}})),alert("\u041e\u0440\u0435\u043d\u0434\u0443 \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e. \u0412\u0430\u043c \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e ".concat(o.toFixed(2)," \u0433\u0440\u043d.")),T()}catch(c){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f \u043e\u0440\u0435\u043d\u0434\u0438:",c)}}:function(){try{var n=new Date(i.lessee.endDate),t=new Date,r=8-t.getMonth(),a=new Date(n);a.setMonth(a.getMonth()+1);var o=new Date(Date.UTC(a.getFullYear(),a.getMonth()+1,0)),l="extendMonthly"===s?o.toISOString().split("T")[0]:new Date(Date.UTC(t.getFullYear(),7,31)).toISOString().split("T")[0],c=(0,C.ER)(i.hiveComponents,i.power),d=r-n.getMonth(),f="extendMonthly"===s?c:c*d+(0,S.z)(s)+I;if(F.balance<f){var h=f-F.balance;return void alert("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e \u043a\u043e\u0448\u0442\u0456\u0432! \u041f\u043e\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043d\u0430 ".concat(h.toFixed(2)," \u0433\u0440\u043d."))}var p=parseFloat((F.balance-("extendMonthly"===s?c:c*d)).toFixed(2));e((0,g.KV)({hiveId:i.id,property:"lessee",value:(0,u.Z)((0,u.Z)({},i.lessee),{},{endDate:l})})),e((0,Z.Fv)({id:i.id,updates:{lessee:(0,u.Z)((0,u.Z)({},i.lessee),{},{endDate:l})}})),e((0,g.ck)({uid:F.id,data:{balance:p}})),alert("\u041e\u0440\u0435\u043d\u0434\u0443 \u043f\u0440\u043e\u0434\u043e\u0432\u0436\u0435\u043d\u043e \u0434\u043e ".concat(l)),T()}catch(v){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u043e\u0434\u043e\u0432\u0436\u0435\u043d\u043d\u044f \u043e\u0440\u0435\u043d\u0434\u0438:",v)}},contractType:s,hive:i})]})},P=function(){return(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{children:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043a\u043b\u0456\u0454\u043d\u0442\u0430"}),(0,m.jsx)(j,{}),(0,m.jsx)(b,{}),(0,m.jsx)(I,{})]})}},6916:function(e,n,t){t.d(n,{P1:function(){return l}});var r="NOT_FOUND";var i=function(e,n){return e===n};function a(e,n){var t="object"===typeof n?n:{equalityCheck:n},a=t.equalityCheck,o=void 0===a?i:a,l=t.maxSize,c=void 0===l?1:l,u=t.resultEqualityCheck,s=function(e){return function(n,t){if(null===n||null===t||n.length!==t.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e(n[i],t[i]))return!1;return!0}}(o),d=1===c?function(e){var n;return{get:function(t){return n&&e(n.key,t)?n.value:r},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(s):function(e,n){var t=[];function i(e){var i=t.findIndex((function(t){return n(e,t.key)}));if(i>-1){var a=t[i];return i>0&&(t.splice(i,1),t.unshift(a)),a.value}return r}return{get:i,put:function(n,a){i(n)===r&&(t.unshift({key:n,value:a}),t.length>e&&t.pop())},getEntries:function(){return t},clear:function(){t=[]}}}(c,s);function f(){var n=d.get(arguments);if(n===r){if(n=e.apply(null,arguments),u){var t=d.getEntries().find((function(e){return u(e.value,n)}));t&&(n=t.value)}d.put(arguments,n)}return n}return f.clearCache=function(){return d.clear()},f}function o(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a,o=0,l={memoizeOptions:void 0},c=r.pop();if("object"===typeof c&&(l=c,c=r.pop()),"function"!==typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=l.memoizeOptions,s=void 0===u?t:u,d=Array.isArray(s)?s:[s],f=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var t=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return n}(r),h=e.apply(void 0,[function(){return o++,c.apply(null,arguments)}].concat(d)),p=e((function(){for(var e=[],n=f.length,t=0;t<n;t++)e.push(f[t].apply(null,arguments));return a=h.apply(null,e)}));return Object.assign(p,{resultFunc:c,memoizedResultFunc:h,dependencies:f,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),p}}var l=o(a)}}]);
//# sourceMappingURL=117.2992042a.chunk.js.map