"use strict";(self.webpackChunkfarmersure=self.webpackChunkfarmersure||[]).push([[199],{2199:function(n,e,t){t.r(e),t.d(e,{default:function(){return x}});var r=t(7834),u=t(4165),i=t(5861),o=t(9439),c=t(2791),a=t(9434),s=t(7799),f=t(673),l=t(6351),d=t(208),h=t(2734),v=t(3329),p=function(){var n=(0,a.v9)(l.eO),e=(0,a.v9)(l.OV),t=(0,a.I0)(),r=(0,c.useState)({}),p=(0,o.Z)(r,2),x=p[0],j=(p[1],(0,c.useState)("")),y=(0,o.Z)(j,2),g=y[0],b=y[1],k=function(){var n=(0,i.Z)((0,u.Z)().mark((function n(e,r,i,o,c){var a,l,v,p;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o){n.next=3;break}return console.error("Invalid status selected"),n.abrupt("return");case 3:if(n.prev=3,a=null===r||void 0===r?void 0:r.lessee.uid){n.next=8;break}return console.error("\u0412\u043b\u0430\u0441\u0442\u0438\u0432\u0456\u0441\u0442\u044c 'lessee' \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0443 \u0432\u0443\u043b\u0438\u043a\u0443."),n.abrupt("return");case 8:if("Done"!==o){n.next=23;break}return n.next=11,(0,h.et)(a);case 11:if((l=n.sent)&&"number"===typeof l.balance){n.next=15;break}return console.error("\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0430\u0431\u043e \u0431\u0430\u043b\u0430\u043d\u0441 \u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e."),n.abrupt("return");case 15:if(!((v=l.balance-c)<0)){n.next=19;break}return alert("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e \u043a\u043e\u0448\u0442\u0456\u0432 \u043d\u0430 \u0431\u0430\u043b\u0430\u043d\u0441\u0456 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0434\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f."),n.abrupt("return");case 19:return p=(0,s.JU)(f.Z,"users",a),n.next=22,(0,s.r7)(p,{balance:v});case 22:console.log("\u0411\u0430\u043b\u0430\u043d\u0441 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.");case 23:t((0,d.Go)({hiveId:r.id,taskId:e,property:i,newValue:o})),n.next=29;break;case 26:n.prev=26,n.t0=n.catch(3),console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0456 \u0431\u0430\u043b\u0430\u043d\u0441\u0443 \u0430\u0431\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f:",n.t0.message);case 29:case"end":return n.stop()}}),n,null,[[3,26]])})));return function(e,t,r,u,i){return n.apply(this,arguments)}}(),m=function(n){b(""===n.target.value?" ":n.target.value)},w=e.reduce((function(n,e){return n[e.id]=e,n}),{});return(0,v.jsxs)("table",{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Hive ID"}),(0,v.jsx)("th",{children:"Task Name"}),(0,v.jsx)("th",{children:"Planned Date"}),(0,v.jsx)("th",{children:"Executor"}),(0,v.jsx)("th",{children:"Duration (min)"}),(0,v.jsx)("th",{children:"Cost ($)"}),(0,v.jsx)("th",{children:"Notes"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Change Status"})]})}),(0,v.jsx)("tbody",{children:n.map((function(n){var e=w[n.hiveId];return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:n.hiveId}),(0,v.jsx)("td",{children:n.name}),(0,v.jsx)("td",{children:n.plannedDate?n.plannedDate:"Not set"}),(0,v.jsx)("td",{children:n.executor}),(0,v.jsx)("td",{children:n.duration}),(0,v.jsx)("td",{children:n.cost}),(0,v.jsx)("td",{children:(0,v.jsx)("textarea",{value:""===g?n.notes:g,onChange:m,onBlur:function(t){return k(n.id,e,"notes",t.target.value)}})}),(0,v.jsx)("td",{children:x[n.id]||n.status}),(0,v.jsx)("td",{children:(0,v.jsxs)("select",{value:x[n.id]||n.status,onChange:function(t){return k(n.id,e,"status",t.target.value,n.cost)},children:[(0,v.jsx)("option",{value:"Under Review",children:"Under Review"}),(0,v.jsx)("option",{value:"Approved",children:"Approved"}),(0,v.jsx)("option",{value:"Canceled",children:"Canceled"}),(0,v.jsx)("option",{value:"Done",children:"Done"})]})})]},n.id)}))})]})},x=function(){return(0,r.a)().isAdmin?(0,v.jsx)(p,{}):(0,v.jsx)("h3",{children:"You must be the Admin"})}},6351:function(n,e,t){t.d(e,{$h:function(){return h},Cp:function(){return l},Dz:function(){return a},OV:function(){return u},d:function(){return c},eO:function(){return f},g8:function(){return v},vh:function(){return s},wI:function(){return d},xU:function(){return i},zh:function(){return o}});var r=t(6916),u=function(n){return n.hives.hives},i=function(n){return n.hives.isLoading},o=function(n){return n.hives.error},c=function(n){return n.user.profile},a=function(n){return n.user.isLoading},s=function(n){return n.user.error},f=((0,r.P1)([u],(function(n){return n.flatMap((function(n){return n.tasks}))})),(0,r.P1)([u],(function(n){return n.flatMap((function(n){return n.tasks})).filter((function(n){return"Under Review"===n.status}))}))),l=(0,r.P1)([u,function(n,e,t){return{hiveId:e,status:t}}],(function(n,e){var t=e.hiveId,r=e.status,u=n.find((function(n){return n.id===t}));return u&&u.tasks?u.tasks.filter((function(n){return n.status===r})):[]})),d=(0,r.P1)([u,function(n,e){return e}],(function(n,e){return n.find((function(n){return n.id===e}))||null})),h=(0,r.P1)([u,c],(function(n,e){if(!e)return 0;var t=e.id;return n.filter((function(n){return n.lessee.uid===t})).flatMap((function(n){return n.tasks.filter((function(n){return"Under Review"===n.status||"Approved"===n.status}))})).reduce((function(n,e){return n+e.cost}),0)})),v=(0,r.P1)([u,function(n,e){return e}],(function(n,e){return n.filter((function(n){var t;return(null===(t=n.lessee)||void 0===t?void 0:t.uid)===e}))}))},6916:function(n,e,t){t.d(e,{P1:function(){return c}});var r="NOT_FOUND";var u=function(n,e){return n===e};function i(n,e){var t="object"===typeof e?e:{equalityCheck:e},i=t.equalityCheck,o=void 0===i?u:i,c=t.maxSize,a=void 0===c?1:c,s=t.resultEqualityCheck,f=function(n){return function(e,t){if(null===e||null===t||e.length!==t.length)return!1;for(var r=e.length,u=0;u<r;u++)if(!n(e[u],t[u]))return!1;return!0}}(o),l=1===a?function(n){var e;return{get:function(t){return e&&n(e.key,t)?e.value:r},put:function(n,t){e={key:n,value:t}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}(f):function(n,e){var t=[];function u(n){var u=t.findIndex((function(t){return e(n,t.key)}));if(u>-1){var i=t[u];return u>0&&(t.splice(u,1),t.unshift(i)),i.value}return r}return{get:u,put:function(e,i){u(e)===r&&(t.unshift({key:e,value:i}),t.length>n&&t.pop())},getEntries:function(){return t},clear:function(){t=[]}}}(a,f);function d(){var e=l.get(arguments);if(e===r){if(e=n.apply(null,arguments),s){var t=l.getEntries().find((function(n){return s(n.value,e)}));t&&(e=t.value)}l.put(arguments,e)}return e}return d.clearCache=function(){return l.clear()},d}function o(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];var i,o=0,c={memoizeOptions:void 0},a=r.pop();if("object"===typeof a&&(c=a,a=r.pop()),"function"!==typeof a)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof a+"]");var s=c.memoizeOptions,f=void 0===s?t:s,l=Array.isArray(f)?f:[f],d=function(n){var e=Array.isArray(n[0])?n[0]:n;if(!e.every((function(n){return"function"===typeof n}))){var t=e.map((function(n){return"function"===typeof n?"function "+(n.name||"unnamed")+"()":typeof n})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return e}(r),h=n.apply(void 0,[function(){return o++,a.apply(null,arguments)}].concat(l)),v=n((function(){for(var n=[],e=d.length,t=0;t<e;t++)n.push(d[t].apply(null,arguments));return i=h.apply(null,n)}));return Object.assign(v,{resultFunc:a,memoizedResultFunc:h,dependencies:d,lastResult:function(){return i},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),v}}var c=o(i)}}]);
//# sourceMappingURL=199.3dcc6a02.chunk.js.map