"use strict";(self.webpackChunkfarmersure=self.webpackChunkfarmersure||[]).push([[571],{8004:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});var r,i,s,a,o,l,d,c,u,h=t(1413),x=t(3433),p=t(9439),v=t(2791),f=t(9434),j=t(7689),m=t(9705),g=t(8771),y=(t(6242),t(8001)),b=t(6370),k=t(1251),w=t(3329),Z=function(e){var n=e.hiveComponents,t=e.power,r=e.totalRent;return(0,w.jsx)("div",{children:(0,w.jsxs)("h4",{children:["\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043e\u0440\u0435\u043d\u0434\u0438 \u0432\u0443\u043b\u0438\u043a\u0430 \u0437 \u0431\u0434\u0436\u043e\u043b\u043e\u0441\u0456\u043c'\u0454\u044e \u043d\u0430"," ",(0,w.jsx)("span",{children:(new Date).toLocaleString("uk-UA",{month:"long"})})," ","\u043c\u0456\u0441\u044f\u0446\u044c:"," ",(0,w.jsxs)("span",{style:{position:"relative",cursor:"pointer"},title:"\u0414\u0435\u0442\u0430\u043b\u0456 \u0440\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043a\u0443:\n- \u041e\u0440\u0435\u043d\u0434\u0430 \u0432\u0443\u043b\u0438\u043a\u0430: ".concat((0,k.F5)(n),"$\n- \u041e\u0440\u0435\u043d\u0434\u0430 \u0431\u0434\u0436\u043e\u043b\u043e\u0441\u0456\u043c\u0457: ").concat((0,k.bY)(t),"$"),children:[r," $/\u043c\u0456\u0441"]})]})})},C=t(4942),S=function(e){var n=e.customTask,t=e.handleCustomTaskChange,r=e.handleAddTask,i=e.errorMessage;return(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{children:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0432\u043b\u0430\u0441\u043d\u043e\u0433\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,w.jsxs)("label",{children:["\u041d\u0430\u0437\u0432\u0430",(0,w.jsx)("span",{style:{color:"red"},children:" *"}),":",(0,w.jsx)("input",{type:"text",name:"name",value:n.name,onChange:t})]}),(0,w.jsx)("br",{}),(0,w.jsxs)("label",{children:["\u041c\u0435\u0442\u0430",(0,w.jsx)("span",{style:{color:"red"},children:" *"}),":",(0,w.jsx)("input",{type:"text",name:"purpose",value:n.purpose,onChange:t})]}),(0,w.jsx)("br",{}),(0,w.jsxs)("label",{children:["\u041e\u043f\u0438\u0441",(0,w.jsx)("span",{style:{color:"red"},children:" *"}),":",(0,w.jsx)("textarea",{name:"description",value:n.description,onChange:t})]}),(0,w.jsx)("br",{}),(0,w.jsxs)("label",{children:["\u0422\u0440\u0438\u0432\u0430\u043b\u0456\u0441\u0442\u044c (\u0445\u0432\u0438\u043b\u0438\u043d\u0438)",(0,w.jsx)("span",{style:{color:"red"},children:" *"}),":",(0,w.jsx)("input",{type:"number",name:"duration",value:n.duration,onChange:t})]}),(0,w.jsx)("br",{}),(0,w.jsxs)("label",{children:["\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u0437\u0430 \u0433\u043e\u0434\u0438\u043d\u0443 \u0440\u043e\u0431\u043e\u0442\u0438 ($)",(0,w.jsx)("span",{style:{color:"red"},children:" *"}),":",(0,w.jsx)("input",{type:"number",name:"costPerHour",value:n.costPerHour,onChange:t})]}),(0,w.jsx)("br",{}),(0,w.jsxs)("label",{children:["\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0438",(0,w.jsx)("span",{style:{color:"red"},children:" *"}),":",(0,w.jsx)("textarea",{name:"notes",value:n.notes,onChange:t})]}),(0,w.jsx)("br",{}),i&&(0,w.jsx)("p",{style:{color:"red"},children:i}),(0,w.jsx)("button",{onClick:r,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u043b\u0430\u0441\u043d\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]})},_=t(3295),I=t(4261),T=function(e,n){var t=new Date,r=new Date(t.getTime()+1764e5).toISOString().slice(0,16);return{id:(0,I.Z)(),hiveId:n,name:e.name,purpose:e.purpose,description:e.description,cost:e.cost||e.duration*(e.costPerHour/60),plannedDate:r,duration:e.duration,status:"Pending",executor:null,date:null,notes:e.notes||"",priority:e.priority||null}},D=t(186),A=t(1283),P=function(e){var n=e.hiveId,t=(0,f.I0)(),r=(0,v.useState)(""),i=(0,p.Z)(r,2),s=i[0],a=i[1],o=((0,D.bj)().mutate,(0,D.Z0)().mutate,(0,v.useState)({name:"",purpose:"",description:"",duration:"",costPerHour:"",notes:""})),l=(0,p.Z)(o,2),d=l[0],c=l[1],u=(0,v.useState)(""),x=(0,p.Z)(u,2),j=x[0],m=x[1],g=function(){if("custom"===s){var e=T(d,n);if(!function(){var e=d.name,n=d.purpose,t=d.description,r=d.duration,i=d.costPerHour;return!!(e&&n&&t&&r&&i)||(m("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0443\u0441\u0456 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0456 \u043f\u043e\u043b\u044f."),!1)}())return;t((0,A.ct)({hiveId:n,newTask:e}))}else{var r=_.q.find((function(e){return e.name===s}));if(console.log(r),r){var i=T(r,n);console.log(i),t((0,A.ct)({hiveId:n,newTask:i}))}}a(""),c({name:"",purpose:"",description:"",duration:"",costPerHour:"",notes:""}),m("")};return(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"taskSelect",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f: "}),(0,w.jsxs)("select",{id:"taskSelect",value:s,onChange:function(e){return a(e.target.value)},children:[(0,w.jsx)("option",{value:"",disabled:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),_.q.map((function(e){return(0,w.jsx)("option",{value:e.name,children:e.name},e.name)})),(0,w.jsx)("option",{value:"custom",children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0432\u043b\u0430\u0441\u043d\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]}),"custom"===s&&(0,w.jsx)(S,{customTask:d,handleCustomTaskChange:function(e){c((0,h.Z)((0,h.Z)({},d),{},(0,C.Z)({},e.target.name,e.target.value)))},handleAddTask:g,errorMessage:j}),"custom"!==s&&(0,w.jsx)("button",{onClick:g,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]})},R=t(6351),q=function(e){var n=e.hiveId,t=e.handleFilter,r=e.handleRequiredTasks,i=e.useRequiredTasks,s=(0,v.useState)(null),a=(0,p.Z)(s,2),o=a[0],l=a[1],d=(0,f.v9)((function(e){return(0,R.Cp)(e,n,"Approved")})),c=(0,f.v9)((function(e){return(0,R.Cp)(e,n,"Done")})),u=(0,f.v9)((function(e){return(0,R.Cp)(e,n,"Under Review")})),h=function(e,n){l(e),t(n)},x=function(e){return e===o?{backgroundColor:"blue",color:"white"}:{backgroundColor:"white",color:"black"}};return(0,w.jsxs)("div",{children:[(0,w.jsx)("button",{onClick:function(){r(),l(null)},style:x(null),children:"All required ".concat(i?"+":"-"," other possible tasks")}),(0,w.jsx)("button",{onClick:function(){return h("Approved",d)},style:x("Approved"),children:"Approved"}),(0,w.jsx)("button",{onClick:function(){return h("Done",c)},style:x("Done"),children:"Done"}),(0,w.jsx)("button",{onClick:function(){return h("Under Review",u)},style:x("Under Review"),children:"Under Review"})]})},F=[{id:1,name:"Nataly",avatar:t.p+"static/media/nat.2d5150df75d481d2f102.png"},{id:2,name:"Yaroslav",avatar:t.p+"static/media/yar.8e3d716e552beeccf9ea.png"},{id:3,name:"Executor 3",avatar:null}],B=t.p+"static/media/defaultAvatar.88f93a8d385a18ca616f.jpg",U=v.memo((function(e){var n=e.tasks,t=e.onConfirmTask,r=e.onDeleteTask,i=e.currentMonth,s=e.hiveId,a=e.onPlannedTasksTotalCostChange,o=e.handleRequiredTasks,l=e.useRequiredTasks,d=(0,D.bj)().mutate,c=(0,f.I0)(),u=(0,v.useState)({}),x=(0,p.Z)(u,2),j=x[0],m=x[1],g=(0,v.useState)({}),y=(0,p.Z)(g,2),b=y[0],k=y[1],Z=(0,v.useState)({}),S=(0,p.Z)(Z,2),_=S[0],I=S[1],T=(0,v.useState)(n),R=(0,p.Z)(T,2),U=R[0],M=R[1],E=function(e,t,r,i){i.preventDefault();var a=n.find((function(n){return n.id===e}));if(a){if("plannedDate"===t&&!H(r))return;var o=(0,h.Z)((0,h.Z)({},a),{},(0,C.Z)({},t,r));c((0,A.cW)({hiveId:s,updatedTask:o}));var l=n.filter((function(e){return"Pending"!==e.status}));d({hiveId:s,updatedTasks:l})}else console.error("Task not found")},H=function(e){var n=new Date;return new Date(e)-n>864e5},O=(0,v.useCallback)((function(){return n.reduce((function(e,n){return"Done"===n.status?e:e+(n.cost||0)}),0)}),[n]);return(0,v.useEffect)((function(){M(n),a(O())}),[n,a,O]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("h3",{children:["\u041f\u043b\u0430\u043d\u043e\u0432\u0456 \u0440\u043e\u0431\u043e\u0442\u0438 \u043d\u0430 ",i," \u043c\u0456\u0441\u044f\u0446\u044c"]}),(0,w.jsx)(q,{hiveId:s,handleFilter:function(e){M(e)},handleRequiredTasks:o,useRequiredTasks:l}),(0,w.jsx)(P,{hiveId:s}),U.length>0?(0,w.jsxs)("table",{children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:"Task"}),(0,w.jsx)("th",{children:"Description"}),(0,w.jsx)("th",{children:"Duration, min"}),(0,w.jsx)("th",{children:"Date & Time"}),(0,w.jsx)("th",{children:"Cost, $"}),(0,w.jsx)("th",{children:"Executor"}),(0,w.jsx)("th",{children:"Notes"}),(0,w.jsx)("th",{children:"Status"}),(0,w.jsx)("th",{children:"Action"})]})}),(0,w.jsxs)("tbody",{children:[U.map((function(e){var n,i;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.name}),(0,w.jsx)("td",{children:e.description}),(0,w.jsx)("td",{children:e.duration}),(0,w.jsx)("td",{children:"Done"!==e.status&&"Under Review"!==e.status?(0,w.jsx)("input",{type:"datetime-local",value:j[e.id]||e.plannedDate||"",onChange:function(n){var t,r;t=e.id,r=n.target.value,H(r)?m((0,h.Z)((0,h.Z)({},j),{},(0,C.Z)({},t,r))):alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0443 \u043d\u0435 \u043f\u0456\u0437\u043d\u0456\u0448\u0435 \u043d\u0456\u0436 \u0437\u0430 24 \u0433\u043e\u0434\u0438\u043d\u0438 \u0434\u043e \u043f\u043e\u0447\u0430\u0442\u043a\u0443!"),E(e.id,"plannedDate",n.target.value,n)}}):(0,w.jsx)("span",{children:e.plannedDate})}),(0,w.jsx)("td",{children:e.cost.toFixed(2)}),(0,w.jsx)("td",{children:"Done"!==e.status&&"Under Review"!==e.status?(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"row-reverse",gap:"5px"},children:[(0,w.jsxs)("select",{value:b[e.id]||e.executor||"",onChange:function(n){var t,r;n.preventDefault(),t=e.id,r=n.target.value,k((0,h.Z)((0,h.Z)({},b),{},(0,C.Z)({},t,r))),E(e.id,"executor",n.target.value,n)},children:[(0,w.jsx)("option",{value:"",disabled:!0,children:"Select Executor"}),F.map((function(e){return(0,w.jsx)("option",{value:e.name,children:e.name},e.id)})),(0,w.jsx)("option",{value:"Self",children:"Self"})]}),(0,w.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,w.jsx)("img",{src:(null===(n=F.find((function(n){return n.name===(b[e.id]||e.executor)})))||void 0===n?void 0:n.avatar)||B,alt:"Executor Avatar",style:{width:"30px",height:"30px",borderRadius:"50%",marginLeft:"8px"}})})]}):(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,w.jsx)("img",{src:(null===(i=F.find((function(n){return n.name===e.executor})))||void 0===i?void 0:i.avatar)||B,alt:"Executor Avatar",style:{width:"30px",height:"30px",borderRadius:"50%"}}),(0,w.jsx)("span",{children:e.executor})]})}),(0,w.jsx)("td",{children:(0,w.jsx)("textarea",{value:_[e.id]||e.notes||"",onChange:function(n){return t=e.id,r=n.target.value,void I((0,h.Z)((0,h.Z)({},_),{},(0,C.Z)({},t,r||" ")));var t,r},onBlur:function(n){return E(e.id,"notes",n.target.value,n)},disabled:"Under Review"===e.status})}),(0,w.jsx)("td",{children:e.status}),(0,w.jsxs)("td",{children:["Done"!==e.status&&"Under Review"!==e.status&&(0,w.jsx)("button",{onClick:function(){return H(e.plannedDate)?t(e.id):alert("\u044f \u0436 \u043f\u0440\u043e\u0448\u0443, \u0432\u0438\u0431\u0435\u0440\u0438 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u0443 \u0434\u0430\u0442\u0443")},disabled:null===e.selectedExecutor,children:"Confirm"}),"Done"!==e.status&&"Under Review"!==e.status&&(0,w.jsx)("button",{onClick:function(){return r(e.id)},disabled:"\u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0430"===e.priority,children:"Delete"})]})]},e.id)})),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{colSpan:"5",style:{fontWeight:"bold"},children:"Total Cost:"}),(0,w.jsxs)("td",{style:{fontWeight:"bold"},children:["$",O().toFixed(2)]}),(0,w.jsx)("td",{colSpan:"3"})]})]})]}):(0,w.jsx)("p",{children:"No required tasks for this month"})]})}),(function(e,n){return e.tasks===n.tasks})),M=t(8501),E=t(3520),H=t(208),O=function(e){var n=new Date,t=new Date(e),r=12*(n.getFullYear()-t.getFullYear())+(n.getMonth()-t.getMonth());return n.getDate()<t.getDate()&&r--,r},Y=t(4773),W=t(1628),$=t(168),z=t(6444),V=z.ZP.div(r||(r=(0,$.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 10px;\n"]))),J=z.ZP.div(i||(i=(0,$.Z)(["\n  width: 400px;\n  height: auto;\n"]))),L=z.ZP.div(s||(s=(0,$.Z)(["\n  width: 600px;\n  margin-top: 10px;\n"]))),N=z.ZP.img(a||(a=(0,$.Z)(["\n  width: 70%;\n  height: 70%;\n  object-fit: cover;\n  display: block; /* \u0412\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u044e\u0454\u043c\u043e block, \u0449\u043e\u0431 \u043f\u0440\u0430\u0446\u044e\u0432\u0430\u0432 margin */\n  margin: 0 auto; /* \u0426\u0435\u043d\u0442\u0440\u0443\u0454\u043c\u043e \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f */\n"]))),X=z.ZP.img(o||(o=(0,$.Z)(["\n  width: 100%;\n  height: auto;\n"]))),K=z.ZP.img(l||(l=(0,$.Z)(['\n  max-width: 90vw; /* \u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u0439\u043c\u0430\u0454 90% \u0448\u0438\u0440\u0438\u043d\u0438 \u0435\u043a\u0440\u0430\u043d\u0443 */\n  max-height: 90vh; /* \u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u0439\u043c\u0430\u0454 90% \u0432\u0438\u0441\u043e\u0442\u0438 \u0435\u043a\u0440\u0430\u043d\u0443 */\n  object-fit: contain;\n  display: block;\n  margin: 0 auto;\n  transition: transform 0.3s ease; /* \u0414\u043e\u0434\u0430\u0454\u043c\u043e \u0430\u043d\u0456\u043c\u0430\u0446\u0456\u044e \u043f\u0440\u0438 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0443\u0432\u0430\u043d\u043d\u0456 */\n  cursor: grab; /* \u0417\u043c\u0456\u043d\u044e\u0454\u043c\u043e \u043a\u0443\u0440\u0441\u043e\u0440 \u043d\u0430 "grab" \u0434\u043b\u044f \u0432\u043a\u0430\u0437\u0456\u0432\u043a\u0438, \u0449\u043e \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u043e\u0436\u043d\u0430 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u0443\u0432\u0430\u0442\u0438 */\n\n  &:hover {\n    cursor: grabbing; /* \u0417\u043c\u0456\u043d\u044e\u0454\u043c\u043e \u043a\u0443\u0440\u0441\u043e\u0440 \u043d\u0430 "grabbing" \u043f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u043d\u0456 */\n  }\n']))),G=z.ZP.div(d||(d=(0,$.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative; /* \u0414\u043b\u044f \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u0437\u0438\u0446\u0456\u043e\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f */\n  height: 100%; /* \u0412\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u044e\u0454\u043c\u043e \u0432\u0438\u0441\u043e\u0442\u0443 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 */\n  overflow: hidden; /* \u0421\u0445\u043e\u0432\u0430\u0442\u0438 \u0447\u0430\u0441\u0442\u0438\u043d\u0438 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f, \u044f\u043a\u0456 \u0432\u0438\u0445\u043e\u0434\u044f\u0442\u044c \u0437\u0430 \u043c\u0435\u0436\u0456 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 */\n"]))),Q=z.ZP.div(c||(c=(0,$.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  max-width: 370px;\n  margin: auto;\n"]))),ee=z.ZP.div(u||(u=(0,$.Z)(["\n  text-align: left;\n  margin: 0 auto 20px auto;\n  max-width: 370px;\n"]))),ne=function(){var e="\u0447\u0435\u0440\u0432\u0435\u043d\u044c",n=JSON.parse(localStorage.getItem("user")),t=(0,j.UO)(),r=(0,f.I0)(),i=(0,f.v9)((function(e){return(0,R.wI)(e,t.hiveId)})),s=(0,f.v9)(R.xU),a=(0,f.v9)(R.zh),o=(0,D.bj)().mutate,l=(0,D.YY)().mutate,d=(0,v.useState)(null),c=(0,p.Z)(d,2),u=c[0],C=c[1],S=(0,v.useState)(!1),P=(0,p.Z)(S,2),q=P[0],F=P[1],B=(0,v.useState)(!1),$=(0,p.Z)(B,2),z=$[0],ne=$[1],te=(0,v.useState)(null),re=(0,p.Z)(te,2),ie=re[0],se=re[1],ae=(0,v.useState)(!1),oe=(0,p.Z)(ae,2),le=oe[0],de=oe[1],ce=(0,v.useState)({x:0,y:0}),ue=(0,p.Z)(ce,2),he=ue[0],xe=ue[1],pe=(0,v.useState)({x:0,y:0}),ve=(0,p.Z)(pe,2),fe=ve[0],je=ve[1],me=(0,v.useState)(0),ge=(0,p.Z)(me,2),ye=ge[0],be=ge[1],ke=(0,v.useState)(!0),we=(0,p.Z)(ke,2),Ze=we[0],Ce=we[1],Se=(0,v.useState)(null),_e=(0,p.Z)(Se,2),Ie=_e[0],Te=_e[1],De=(0,f.v9)(R.d),Ae=(0,f.v9)(R.$h),Pe=(0,v.useMemo)((function(){var e=Object.entries(i.additionalServices).filter((function(e){var n=(0,p.Z)(e,2);n[0];return n[1]})).map((function(e){return(0,p.Z)(e,1)[0]}));return i.agreeWithBasicTech&&e.push("honey"),e}),[i.additionalServices,i.agreeWithBasicTech]);(0,v.useEffect)((function(){var n=function(e,n,t){var r=new Date,i=new Date(r.getTime()+1764e5).toISOString().slice(0,16);return _.q.filter((function(n){var r=n.month.includes(e),i="\u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0430"===n.priority,s=Array.isArray(n.purpose)&&n.purpose.length>0&&n.purpose.some((function(e){return t.includes(e)}));return r||i||s})).map((function(e){return{id:(0,I.Z)(),hiveId:n,name:e.name,purpose:e.purpose,description:e.description,cost:e.duration*(e.costPerHour/60),plannedDate:i,duration:e.duration,status:"Pending",executor:null,date:null,notes:"",priority:e.priority||null,frequency:e.frequency||null}}))}(e,t.hiveId,Pe),s=function(e,n,t,r){var i=[];return n.forEach((function(n){var s=e.filter((function(e){return e.name===n.name})).length,a=n.frequency?n.frequency[t]:1;if(s<a)for(var o=a-s,l=0;l<o;l++){var d=T(n,r);i.push(d)}})),i}(i.tasks,n,e,t.hiveId);if(Ze){var a=[].concat((0,x.Z)(i.tasks),(0,x.Z)(s)).filter((function(e){var n=Array.isArray(e.purpose)&&e.purpose.length>0&&e.purpose.some((function(e){return Pe.includes(e)}));return"Pending"!==e.status||"\u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0430"===e.priority||n}));r((0,A._y)({hiveId:t.hiveId,newTasks:a}))}else{console.log("All tasks for the current month are already present.");var o=[].concat((0,x.Z)(i.tasks),(0,x.Z)(s));r((0,A._y)({hiveId:t.hiveId,newTasks:o}))}}),[e,r,t.hiveId,Ze,i.additionalServices,i.agreeWithBasicTech]);var Re;if(Re=q,(0,v.useEffect)((function(){return document.body.style.overflow=Re?"hidden":"auto",function(){document.body.style.overflow="auto"}}),[Re]),s)return(0,w.jsx)("p",{children:"Loading..."});if(a)return(0,w.jsxs)("p",{children:["Error: ",a.message]});var qe=function(){de(!1)},Fe=function(e){var n=e.target,i=n.name,s=n.checked;r((0,H.ye)({hiveId:t.hiveId,service:i,value:s}))},Be=(0,Y.P)(i),Ue=function(e){Te(e),ne(!0)},Me=function(){ne(!1)},Ee=(0,k.ER)(i.hiveComponents,i.power);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h2",{style:{textAlign:"center",marginBottom:"10px"},children:'"I\'m a BeehiveCard"'}),(0,w.jsxs)(V,{children:[(0,w.jsx)(J,{children:(0,w.jsx)(m.tq,{modules:[g.W_,g.o3],spaceBetween:10,navigation:!0,thumbs:{swiper:u&&!u.destroyed?u:null},children:i.images.map((function(e,n){return(0,w.jsx)(m.o5,{children:(0,w.jsx)(N,{src:e,alt:"Hive Image ".concat(n+1),onClick:function(){return function(e){se(e),F(!0)}(e)}})},n)}))})}),(0,w.jsx)(L,{children:(0,w.jsx)(m.tq,{modules:[g.o3],onSwiper:C,spaceBetween:10,slidesPerView:5,watchSlidesProgress:!0,children:i.images.map((function(e,n){return(0,w.jsx)(m.o5,{children:(0,w.jsx)(X,{src:e,alt:"Thumbnail ".concat(n+1)})},n)}))})})]}),(0,w.jsx)(y.u,{isOpen:q,onClose:function(){F(!1),se(null)},children:(0,w.jsx)(G,{onMouseDown:function(e){de(!0),xe({x:e.clientX,y:e.clientY})},onMouseMove:function(e){if(le){var n=e.clientX-he.x,t=e.clientY-he.y;je((function(e){return{x:e.x+n,y:e.y+t}})),xe({x:e.clientX,y:e.clientY})}},onMouseUp:qe,onMouseLeave:qe,children:(0,w.jsx)(K,{src:ie,alt:"Original Size",style:{transform:"scale(2.2) translate(".concat(fe.x,"px, ").concat(fe.y,"px)")}})})}),(0,w.jsxs)(Q,{children:[(0,w.jsxs)("h4",{children:["hive system: ",i.system]}),(0,w.jsxs)("h4",{children:["the power of the colony: ",i.power," \u0440\u0430\u043c\u043e\u043a"]}),(0,w.jsxs)("h4",{children:["breed: ",i.breed]}),(0,w.jsxs)("h4",{children:["the age of the queen bee: ",O(i.queensBirthday)," \u043c\u0456\u0441\u044f\u0446\u0456\u0432"]})]}),(0,w.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",checked:i.agreeWithBasicTech,onChange:function(e){r((0,H.$C)({hiveId:t.hiveId,value:e.target.checked}))}}),"\u041f\u043e\u0433\u043e\u0434\u0436\u0443\u044e\u0441\u044c \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0411\u0430\u0437\u043e\u0432\u0443 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u044e \u0431\u0434\u0436\u0456\u043b\u044c\u043d\u0438\u0446\u0442\u0432\u0430"]})}),(0,w.jsx)("p",{style:{textAlign:"center",margin:"10px 0 20px 0"},children:i.agreeWithBasicTech?"\u0412\u0438 \u043f\u043e\u0433\u043e\u0434\u0438\u043b\u0438\u0441\u044c \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0411\u0430\u0437\u043e\u0432\u0443 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u044e \u0431\u0434\u0436\u0456\u043b\u044c\u043d\u0438\u0446\u0442\u0432\u0430":"\u0412\u0438 \u0449\u0435 \u043d\u0435 \u043f\u043e\u0433\u043e\u0434\u0438\u043b\u0438\u0441\u044c \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0411\u0430\u0437\u043e\u0432\u0443 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u044e \u0431\u0434\u0436\u0456\u043b\u044c\u043d\u0438\u0446\u0442\u0432\u0430"}),(0,w.jsx)(b.X,{hive:i}),(0,w.jsxs)(ee,{children:[(0,w.jsx)("h3",{style:{marginBottom:"20px"},children:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u043f\u043e\u0441\u043b\u0443\u0433\u0438:"}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",name:"pollen",checked:i.additionalServices.pollen,onChange:Fe}),"\u041f\u0438\u043b\u043e\u043a"]})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",name:"propolis",checked:i.additionalServices.propolis,onChange:Fe}),"\u041f\u0440\u043e\u043f\u043e\u043b\u0456\u0441"]})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",name:"wax",checked:i.additionalServices.wax,onChange:Fe}),"\u0412\u0456\u0441\u043a"]})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",name:"royalJelly",checked:i.additionalServices.royalJelly,onChange:Fe}),"\u041c\u0430\u0442\u043e\u0447\u043d\u0435 \u043c\u043e\u043b\u043e\u0447\u043a\u043e"]})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",name:"droneHomogenate",checked:i.additionalServices.droneHomogenate,onChange:Fe}),"\u0422\u0440\u0443\u0442\u043d\u0435\u0432\u0438\u0439 \u0433\u043e\u043c\u043e\u0433\u0435\u043d\u0430\u0442"]})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"checkbox",name:"beeVenom",checked:i.additionalServices.beeVenom,onChange:Fe}),"\u0411\u0434\u0436\u043e\u043b\u0438\u043d\u0430 \u043e\u0442\u0440\u0443\u0442\u0430 (\u0441\u0438\u0440\u0435\u0446\u044c)"]})})]}),(0,w.jsxs)(ee,{children:[(0,w.jsx)("h4",{children:"\u041e\u0431\u0440\u0430\u043d\u0456 \u043f\u043e\u0441\u043b\u0443\u0433\u0438:"}),(0,w.jsx)("p",{children:i.additionalServices.pollen&&"\u041f\u0438\u043b\u043e\u043a"}),(0,w.jsx)("p",{children:i.additionalServices.propolis&&"\u041f\u0440\u043e\u043f\u043e\u043b\u0456\u0441"}),(0,w.jsx)("p",{children:i.additionalServices.wax&&"\u0412\u0456\u0441\u043a"}),(0,w.jsx)("p",{children:i.additionalServices.royalJelly&&"\u041c\u0430\u0442\u043e\u0447\u043d\u0435 \u043c\u043e\u043b\u043e\u0447\u043a\u043e"}),(0,w.jsx)("p",{children:i.additionalServices.droneHomogenate&&"\u0422\u0440\u0443\u0442\u043d\u0435\u0432\u0438\u0439 \u0433\u043e\u043c\u043e\u0433\u0435\u043d\u0430\u0442"}),(0,w.jsx)("p",{children:i.additionalServices.beeVenom&&"\u0411\u0434\u0436\u043e\u043b\u0438\u043d\u0430 \u043e\u0442\u0440\u0443\u0442\u0430 (\u0441\u0438\u0440\u0435\u0446\u044c)"})]}),(0,w.jsxs)(ee,{children:[(0,w.jsxs)("h3",{title:"\u0412\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u0454\u0442\u0435 \u0432\u0441\u044e \u0432\u0438\u0440\u043e\u0431\u043b\u0435\u043d\u0443 \u0446\u0456\u0454\u044e \u0431\u0434\u0436\u043e\u043b\u043e\u0441\u0456\u043c'\u0454\u044e \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0456\u044e, \u044f\u043a\u043e\u0457 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043d\u0430\u0431\u0430\u0433\u0430\u0442\u043e \u0431\u0456\u043b\u044c\u0448\u0435, \u0430\u043b\u0435 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e\u0457 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0456, \u044f\u043a\u0443 \u043c\u0438 \u0433\u0430\u0440\u0430\u043d\u0442\u0443\u0454\u043c\u043e \u043f\u0440\u0438 \u0437\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u043d\u043d\u0456 \u0431\u0430\u0437\u043e\u0432\u043e\u0457 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u0457.",style:{display:"inline-block",cursor:"pointer"},children:["\u0413\u0430\u0440\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u0456\u0441\u0442\u044c \u0431\u0434\u0436\u043e\u043b\u0438\u043d\u043e\u0457 \u0441\u0456\u043c'\u0457",(0,w.jsx)("span",{style:{cursor:"pointer",color:"red",marginLeft:"5px"},children:"*"})]}),(0,w.jsxs)("p",{children:["\u041c\u0435\u0434: ",Be.honey," \u043a\u0433"]}),(0,w.jsxs)("p",{children:["\u041f\u0438\u043b\u043e\u043a: ",Be.pollenAmount," \u043a\u0433"]}),(0,w.jsxs)("p",{children:["\u041f\u0440\u043e\u043f\u043e\u043b\u0456\u0441: ",Be.propolisAmount," \u043a\u0433"]}),(0,w.jsxs)("p",{children:["\u0412\u0456\u0441\u043a: ",Be.waxAmount," \u043a\u0433"]}),(0,w.jsxs)("p",{children:["\u041c\u0430\u0442\u043e\u0447\u043d\u0435 \u043c\u043e\u043b\u043e\u0447\u043a\u043e: ",Be.royalJellyAmount," \u043a\u0433"]}),(0,w.jsxs)("p",{children:["\u0422\u0440\u0443\u0442\u043d\u0435\u0432\u0438\u0439 \u0433\u043e\u043c\u043e\u0433\u0435\u043d\u0430\u0442: ",Be.droneHomogenateAmount," \u043a\u0433"]}),(0,w.jsxs)("p",{children:["\u0411\u0434\u0436\u043e\u043b\u0438\u043d\u0430 \u043e\u0442\u0440\u0443\u0442\u0430 (\u0441\u0438\u0440\u0435\u0446\u044c): ",Be.beeVenomAmount," \u043a\u0433"]})]}),(0,w.jsx)(Z,{hiveComponents:i.hiveComponents,power:i.power,totalRent:Ee.toFixed(2)}),(0,w.jsx)(U,{tasks:i.tasks,onConfirmTask:function(e){if(console.log(i.lessee.uid===De.id),i.lessee.uid===De.id){var n=i.tasks.find((function(n){return n.id===e}));if(n){var s=De.balance-Ae;if("Approved"!==n.status&&s<n.cost)alert("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e \u043a\u043e\u0448\u0442\u0456\u0432 \u043d\u0430 \u0431\u0430\u043b\u0430\u043d\u0441\u0456 \u0434\u043b\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u0446\u044c\u043e\u0433\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f. \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441.");else{var a=i.tasks.filter((function(n){return"Pending"!==n.status||n.id===e})).map((function(n){return n.id===e?(0,h.Z)((0,h.Z)({},n),{},{status:"Under Review"}):n})),l=a.filter((function(n){return n.id===e}));o({hiveId:t.hiveId,tasks:a}),r((0,A.cW)({hiveId:t.hiveId,updatedTask:l[0]}))}}else console.error("\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e")}else alert("\u0412\u0430\u043c \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u0434\u043e\u0433\u043e\u0432\u0456\u0440 \u043e\u0440\u0435\u043d\u0434\u0438 \u043d\u0430 \u0446\u0435\u0439 \u0432\u0443\u043b\u0438\u043a")},onDeleteTask:function(e){var n=i.tasks.filter((function(n){return n.id!==e&&"Pending"!==n.status}));l({hiveId:t.hiveId,tasks:n}),r((0,A.F1)({hiveId:t.hiveId,taskId:e}))},currentMonth:e,hiveId:t.hiveId,onPlannedTasksTotalCostChange:function(e){be(e)},handleRequiredTasks:function(){Ce((function(e){return!e}))},useRequiredTasks:Ze}),""===i.lessee.uid&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(M.z,{variant:"formBtn",size:"large",onClick:function(){return Ue("monthly")},children:["\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u0434\u043e\u0433\u043e\u0432\u0456\u0440 \u043e\u0440\u0435\u043d\u0434\u0438 \u043d\u0430 \u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u043c\u0456\u0441\u044f\u0446\u044c ($",(Ee+ye).toFixed(2),")",(0,w.jsx)("br",{}),"\u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u0431\u0434\u0436\u043e\u043b\u043e\u0441\u0456\u043c'\u0454\u044e \u043e\u043d\u043b\u0430\u0439\u043d, \u0437\u0431\u0456\u0440 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0445 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432 \u0431\u0434\u0436\u0456\u043b\u044c\u043d\u0438\u0446\u0442\u0432\u0430"]}),(0,w.jsxs)(M.z,{variant:"formBtn",size:"large",onClick:function(){return Ue("seasonal")},children:["\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u0434\u043e\u0433\u043e\u0432\u0456\u0440 \u043e\u0440\u0435\u043d\u0434\u0438 \u043d\u0430 \u043f\u043e\u0432\u043d\u0438\u0439 \u0441\u0435\u0437\u043e\u043d ($",(6*Ee+(0,W.i)()).toFixed(2),")",(0,w.jsx)("br",{}),"\u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u0431\u0434\u0436\u043e\u043b\u043e\u0441\u0456\u043c'\u0454\u044e \u043e\u043d\u043b\u0430\u0439\u043d, \u0433\u0430\u0440\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0435 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0443 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432 \u0431\u0434\u0436\u0456\u043b\u044c\u043d\u0438\u0446\u0442\u0432\u0430"]})]}),(0,w.jsx)(E.z,{isOpen:z,onClose:Me,contractText:"\n    \u0414\u043e\u0433\u043e\u0432\u0456\u0440 \u043e\u0440\u0435\u043d\u0434\u0438 \u0432\u0443\u043b\u0438\u043a\u0430 \u0442\u0430 \u0431\u0434\u0436\u043e\u043b\u043e\u0441\u0456\u043c'\u0457...\n    \u041e\u0440\u0435\u043d\u0434\u043e\u0434\u0430\u0432\u0435\u0446\u044c: __________\n    \u041e\u0440\u0435\u043d\u0434\u0430\u0440: __________\n    \u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043e\u0440\u0435\u043d\u0434\u0438: __________\n    \u0417\u0430\u043f\u043b\u0430\u043d\u043e\u0432\u0430\u043d\u0456 \u0440\u043e\u0431\u043e\u0442\u0438: __________\n    \u0423\u043c\u043e\u0432\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443: __________\n  ",onSignContract:function(e){try{var i,s,o=new Date,l=o.toISOString().split("T")[0],d=8-o.getMonth();if("monthly"===e)i=new Date(Date.UTC(o.getFullYear(),o.getMonth()+1,0)).toISOString().split("T")[0],s=Ee+ye;else"seasonal"===e&&(i=new Date(Date.UTC(o.getFullYear(),7,31)).toISOString().split("T")[0],s=Ee*d+(0,W.i)());if(De.balance<s){var c=s-De.balance;return void alert("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e \u043a\u043e\u0448\u0442\u0456\u0432! \u041f\u043e\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043d\u0430 ".concat(c.toFixed(2)," \u0433\u0440\u043d."))}var u=parseFloat(De.balance-("monthly"===e?Ee:Ee*d).toFixed(2));r((0,H.KV)({hiveId:t.hiveId,property:"lessee",value:{uid:n.uid,startDate:l,endDate:i,type:e}})),r((0,A.Fv)({id:t.hiveId,updates:{lessee:{uid:n.uid,startDate:l,endDate:i,type:e}}})),r((0,H.ck)({uid:De.id,data:{balance:u}})),Me()}catch(a){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443:",a)}},contractType:Ie})]})},te=function(){return(0,w.jsx)(ne,{})}}}]);
//# sourceMappingURL=571.49426172.chunk.js.map